/*
 * V4.js 0.1.5 <https://V4.rainflame.com>
 *
 * Copyright 2019  Christian Broms <cb@rainfla.me>
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

 var opentype_js = opentype;
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("opentype.js")):"function"==typeof define&&define.amd?define(["exports","opentype.js"],e):e((t=t||self).V4={},t.opentype)}(this,function(t,e){"use strict";function a(t){t.context.fillStyle=t.backgroundColor,t.context.fillRect(0,0,t.canvas.width,t.canvas.height)}function h(t){t.context.clearRect(0,0,t.canvas.width,t.canvas.height)}var c=function(){this.canvas=null,this.context=null,this.glCanvas=null,this.glContext=null,this.webgl=!1,this.backgroundColor="#000",this.deltaTime=0,this.frameCount=0,this.startTime=0,this.fps=0,this.loop=null},o=(s.prototype.push=function(t,e){var o=function(){};if(void 0!==e&&(o=e),Array.isArray(t))for(var s=!0,n=0,r=t;n<r.length;n++){var i={r:r[n],d:s?o:function(){}};this._rendererBuffer.push(i),s=s&&!1}else i={r:t,d:o},this._rendererBuffer.push(i)},s.prototype.pop=function(){return this._rendererBuffer.shift()},s.prototype.renderer=function(t){for(var e=this._rendererBuffer.length,o=0;o<e;o++){var s=this.pop(),n=s.r(t);void 0===n||n?this._rendererBuffer.push(s):s.d()}},s);function s(){this._rendererBuffer=[]}var f=function(t,e){if(void 0===e&&(e=!1),e)throw f("V4.js Exception: "+t);return console.error("V4.js Error: "+t),!1},n=(r.prototype.buildShaders=function(t){t instanceof HTMLCanvasElement||f("Shader requires an HTML canvas element",!0);var e=t.getContext("webgl");null===this._gl&&f("Unable to get canvas context. Did you already get a 2D or 3D context from this canvas?",!0),this._gl=e;var o=this._gl.createShader(this._gl.VERTEX_SHADER);void 0===o&&f("Failed to create vertex shader"),this._vertexShader=o,this._compileShader(this._gl,this._vertexShader,"\n  #ifdef GL_ES\n  precision mediump float;\n  #endif\n  attribute vec2 position;\n  void main() {\n    gl_Position = vec4(position, 0.0, 1.0);\n  }\n")&&f("Failed to compile vertex shader");var s=this._gl.createShader(this._gl.FRAGMENT_SHADER);void 0===s&&f("Failed to create fragment shader"),this._fragmentShader=s,this._compileShader(this._gl,this._fragmentShader,"\n  #ifdef GL_ES\n  precision mediump float;\n  #endif\n  void main() {\n    gl_FragColor = vec4(0.0);\n  }\n")&&f("failed to compile vertex shader"),this._shaderProgram=this._createShaderProgram(this._gl,this._vertexShader,this._fragmentShader),this._bindPositionAttribute(this._gl,this._shaderProgram),this._gl.clearColor(0,0,0,1),this._gl.useProgram(this._shaderProgram),this._gl.viewport(0,0,t.width,t.height)},r.prototype.loadShader=function(o){return new Promise(function(t){var e=new XMLHttpRequest;e.open("get",o,!0),e.responseType="text",e.onload=function(){e.response?t(e.response):(f("Shader could not be loaded: "+e.statusText,!0),t(void 0))},e.onerror=function(){f("Shader could not be loaded",!0),t(void 0)},e.send()})},r.prototype.setShader=function(t,e){void 0===this._gl&&(void 0===e?f("Need a canvas to add a shader",!0):this.buildShaders(e));var o=this._gl,s=this._compileShader(o,this._fragmentShader,t);if(s)return s;o.linkProgram(this._shaderProgram),o.getProgramParameter(this._shaderProgram,o.LINK_STATUS)||(console.error(o.getProgramInfoLog(this._shaderProgram)),f("Failed to link program",!0))},r.prototype.setUniform=function(t,e){var o=this._gl.getUniformLocation(this._shaderProgram,t);if(null===o&&f("Uniform location for "+t+" not found"),"number"!=typeof e)switch(e.length){case 2:this._gl.uniform2fv(o,e);break;case 3:this._gl.uniform3fv(o,e);break;case 4:this._gl.uniform4fv(o,e)}else this._gl.uniform1f(o,e)},r.prototype.useCanvasState=function(t){this._useState=t},r.prototype.setTexture=function(t,e){var o=this,s=this._gl,n=this._textures[t];if(!n){var r=s.createTexture();r||f("Unable to create glTexture"),n={glTexture:r,unit:this._lowestUnused(Object.keys(this._textures).map(function(t){return o._textures[t].unit}))},this._textures[t]=n}s.activeTexture(s.TEXTURE0+n.unit),s.bindTexture(s.TEXTURE_2D,n.glTexture),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,1),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,e);var i=s.getUniformLocation(this._shaderProgram,t);null===i&&f("Uniform location for texture "+t+" not found"),s.uniform1i(i,n.unit)},r.prototype.renderer=function(t){var e=this;if(void 0===this._gl&&this.buildShaders(t.glCanvas),this._useState)if("createImageBitmap"in window)createImageBitmap(t.canvas).then(function(t){e.setTexture("u_texture",t)});else{var o=t.context.getImageData(0,0,t.canvas.width,t.canvas.height);this.setTexture("u_texture",o)}this.setUniform("u_resolution",[t.glCanvas.width,t.glCanvas.height]),this.setUniform("u_deltaTime",t.deltaTime),this._gl.clear(this._gl.COLOR_BUFFER_BIT),this._gl.drawArrays(this._gl.TRIANGLE_STRIP,0,4)},r.prototype._compileShader=function(t,e,o){if(t.shaderSource(e,o),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(e);return s||f("Failed to compile, but found no error log"),console.error(s),f("Failed to compile shader program.",!0),this._parseErrorMessages(s)}},r.prototype._createShaderProgram=function(t,e,o){var s=t.createProgram();if(null===s&&f("failed to create shader program"),t.attachShader(s,e),t.attachShader(s,o),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS)){var n=t.getProgramInfoLog(s);console.error(n),f("failed to link program")}return s},r.prototype._bindPositionAttribute=function(t,e){var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o);var s=new Float32Array([-1,-1,-1,1,1,-1,1,1]);t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW);var n=t.getAttribLocation(e,"position");t.bindBuffer(t.ARRAY_BUFFER,o),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n)},r.prototype._parseErrorMessages=function(t){for(var e=/^ERROR: \d+:(\d+).*$/gm,o=[],s=e.exec(t);s;)o.push({lineNumber:parseInt(s[1],10),text:s[0]}),s=e.exec(t);return o},r.prototype._lowestUnused=function(t){for(var e=0,o=0;o<t.length;o++)t[o]===e&&(e++,o=-1);return e},r);function r(t){this._textures={},void 0!==t&&this.buildShaders(t),this._useState=!1,this.renderer=this.renderer.bind(this)}function i(t,e,o){var s=void 0!==o;for(var n in t)if(t.hasOwnProperty(n))switch(n){case"font":e.opts.font=t[n];break;case"fontSize":e.opts.fontSize=s&&void 0!==o.destOpts[n]?o.easingFunc(o.elapsed,o.ogOpts[n],o.destOpts[n],o.duration):t[n];break;case"horizontalAlign":e.opts.horizontalAlign=t[n];break;case"verticalAlign":e.opts.verticalAlign=t[n];break;case"size":var r=s&&void 0!==o.destOpts[n]?o.easingFunc(o.elapsed,o.ogOpts[n].h,o.destOpts[n].h,o.duration):t[n].h,i=s&&void 0!==o.destOpts[n]?o.easingFunc(o.elapsed,o.ogOpts[n].w,o.destOpts[n].w,o.duration):t[n].w;e.opts.size={h:r,w:i},e.opts.bounds.h=r,e.opts.bounds.w=i,e.opts.bounds.x3=e.opts.position.x+i,e.opts.bounds.x4=e.opts.position.x+i,e.opts.bounds.y2=e.opts.position.y-r,e.opts.bounds.y3=e.opts.position.y-r;break;case"position":var a=s&&void 0!==o.destOpts[n]?o.easingFunc(o.elapsed,o.ogOpts[n].x,o.destOpts[n].x,o.duration):t[n].x,h=s&&void 0!==o.destOpts[n]?o.easingFunc(o.elapsed,o.ogOpts[n].y,o.destOpts[n].y,o.duration):t[n].y;e.opts.position={x:a,y:h},e.opts.bounds={h:e.opts.size.h,w:e.opts.size.w,x1:a,x2:a,x3:a+e.opts.size.w,x4:a+e.opts.size.w,y1:h,y2:h-e.opts.size.h,y3:h-e.opts.size.h,y4:h};break;case"bounds":if(s&&void 0!==o.destOpts[n]){var u=o.easingFunc,l=o.elapsed,d=o.ogOpts[n],p=o.destOpts[n],c=o.duration;e.opts.bounds.x1=u(l,d.x1,p.x1,c),e.opts.bounds.x2=u(l,d.x2,p.x2,c),e.opts.bounds.x3=u(l,d.x3,p.x3,c),e.opts.bounds.x4=u(l,d.x4,p.x4,c),e.opts.bounds.y1=u(l,d.y1,p.y1,c),e.opts.bounds.y2=u(l,d.y2,p.y2,c),e.opts.bounds.y3=u(l,d.y3,p.y3,c),e.opts.bounds.y4=u(l,d.y4,p.y4,c),e.opts.position.x=e.opts.bounds.x1,e.opts.position.y=e.opts.bounds.y1,e.opts.size.h=u(l,d.h,p.h,c),e.opts.size.w=u(l,d.w,p.w,c)}else e.opts.bounds=t[n],e.opts.size.h=t[n].h,e.opts.size.w=t[n].w,e.opts.position.x=t[n].x1,e.opts.position.y=t[n].y1;break;case"color":if(e.opts.color=t[n],s&&void 0!==o.destOpts[n]){var f=o.easingFunc(o.elapsed,0,1,o.duration),g=o.colorLerp(f);e.opts.color=g}break;case"backgroundColor":if(e.opts.backgroundColor=t[n],s&&void 0!==o.destOpts[n]){f=o.easingFunc(o.elapsed,0,1,o.duration),g=o.backgroundColorLerp(f);e.opts.backgroundColor=g}break;case"wrap":e.opts.wrap=t[n]}}var u=(l.prototype.options=function(t){return void 0!==t&&(i(t,this),this._modified=!0),this.opts},l.prototype.text=function(t){return void 0!==t&&(this._text=t,this._calcStats(),this._modified=!0),this._text},l.prototype.outlinePath=function(t){return void 0!==t&&(this._debug=t,this._modified=!0),this._debug},l.prototype.renderer=function(t){var e=t.context;e.save(),e.beginPath(),e.moveTo(this.opts.bounds.x1,this.opts.bounds.y1),e.lineTo(this.opts.bounds.x2,this.opts.bounds.y2),e.lineTo(this.opts.bounds.x4,this.opts.bounds.y4),e.moveTo(this.opts.bounds.x3,this.opts.bounds.y3),e.lineTo(this.opts.bounds.x4,this.opts.bounds.y4),e.lineTo(this.opts.bounds.x2,this.opts.bounds.y2),e.closePath(),e.clip(),this._debug&&(e.lineWidth=1,e.strokeStyle="red",e.beginPath(),e.moveTo(this.opts.bounds.x1,this.opts.bounds.y1),e.lineTo(this.opts.bounds.x2,this.opts.bounds.y2),e.moveTo(this.opts.bounds.x2,this.opts.bounds.y2),e.lineTo(this.opts.bounds.x3,this.opts.bounds.y3),e.moveTo(this.opts.bounds.x3,this.opts.bounds.y3),e.lineTo(this.opts.bounds.x4,this.opts.bounds.y4),e.moveTo(this.opts.bounds.x4,this.opts.bounds.y4),e.lineTo(this.opts.bounds.x1,this.opts.bounds.y1),e.closePath(),e.stroke()),e.fillStyle=this.opts.backgroundColor,e.fillRect(this.opts.bounds.x2,this.opts.bounds.y2,this.opts.bounds.w,this.opts.bounds.h),this._modified&&(this._calculateTextRenderXY(),this._modified=!1),e.fillStyle=this.opts.color;for(var o=0,s=this._chunks;o<s.length;o++){var n=s[o],r=this.opts.font.getPath(n.text,n.pos.x,n.pos.y,this.opts.fontSize),i=new Path2D(r.toPathData(2));e.fill(i)}e.restore()},l.prototype._calcStats=function(){if(void 0===this.opts.font)f("A font is required to draw TextBox.",!0);else{var t=this.opts.font.getPath(this._text,0,0,this.opts.fontSize).getBoundingBox();this._textStats.textHeight=t.y2-t.y1,this._textStats.textOffsetBottom=t.y2+this.opts.lineHeight,this._textStats.textWidth=this.opts.font.getAdvanceWidth(this._text,this.opts.fontSize),this._createChunks()}},l.prototype._createChunks=function(){if(this.opts.wrap){for(var t=[],e=0,o="",s=0,n=this._text.split(" ");s<n.length;s++){var r=n[s],i=""!==o?o+" "+r:r;e=(a=this.opts.font.getPath(i,0,0,this.opts.fontSize).getBoundingBox()).x2-a.x1<this.opts.bounds.w?(o=i,a.x2-a.x1):(t.push({num:t.length+1,pos:{x:0,y:0},text:o,width:e}),o=r,0)}0===e&&(e=(a=this.opts.font.getPath(o,0,0,this.opts.fontSize).getBoundingBox()).x2-a.x1),t.push({num:t.length+1,pos:{x:0,y:0},text:o,width:e}),this._textStats.totalTextHeight=t.length*this._textStats.textHeight,this._chunks=t}else{var a=this.opts.font.getPath(this._text,0,0,this.opts.fontSize).getBoundingBox();this._chunks=[{num:1,pos:{x:0,y:0},text:this._text,width:a.x2-a.x1}]}},l.prototype._calculateTextRenderXY=function(){var t,e;this._calcStats();for(var o=this._chunks,s=0,n=o;s<n.length;s++){var r=n[s];if("BOTTOM"===this.opts.verticalAlign){var i=(this._textStats.textHeight+this._textStats.textOffsetBottom)*this._chunks.length;e=this.opts.bounds.y1-(i/this._chunks.length*(this._chunks.length-r.num)+this._textStats.textOffsetBottom)}else if("CENTER"===this.opts.verticalAlign){var a=(i=(this._textStats.textHeight+this._textStats.textOffsetBottom)*this._chunks.length)/this._chunks.length*(this._chunks.length-r.num)+this._textStats.textOffsetBottom;e=this.opts.bounds.y1-(this.opts.bounds.h/2-i/2)-a}else"TOP"===this.opts.verticalAlign&&(a=(i=(this._textStats.textHeight+this._textStats.textOffsetBottom)*this._chunks.length)/this._chunks.length*(this._chunks.length-r.num)+this._textStats.textOffsetBottom,e=this.opts.bounds.y1-(this.opts.bounds.h-i)-a);"LEFT"===this.opts.horizontalAlign?t=this.opts.bounds.x1:"CENTER"===this.opts.horizontalAlign?t=this.opts.bounds.x1+this.opts.bounds.w/2-r.width/2:"RIGHT"===this.opts.horizontalAlign&&(t=this.opts.bounds.x1+(this.opts.bounds.w-r.width)),r.pos.x=t,r.pos.y=e}return o},l);function l(t){this.opts={backgroundColor:"white",bounds:{h:0,w:0,x1:0,x2:0,x3:0,x4:0,y1:0,y2:0,y3:0,y4:0},color:"black",font:null,fontSize:24,horizontalAlign:"RIGHT",lineHeight:8,position:{x:0,y:0},size:{h:0,w:0},stroke:!1,strokeColor:"white",strokeWidth:0,textBox:this,verticalAlign:"BOTTOM",wrap:!0},this._modified=!0,this._text="",this._debug=!1,this._chunks=null,this._textStats={textHeight:0,textOffsetBottom:this.opts.lineHeight,textWidth:0,totalTextHeight:0},this.renderer=this.renderer.bind(this),void 0!==t&&(i(t,this),this._modified=!0)}var d=(p.prototype.framesPerSecond=function(t){return t&&(this._fps=t,this._fpsInterval=1e3/t),this._fps},p.prototype.addToLoop=function(t){t instanceof o?this._renderQueueBuffer.push(t):t instanceof u?this._rendererBuffer.push(t.renderer):t instanceof n?this._shaderBuffer.push(t):this._rendererBuffer.push(t)},p.prototype.startLoop=function(){this._loop=!0,this._then=window.performance.now(),this._startTime=this._then,this._renderLoop(this)},p.prototype.stopLoop=function(){this._loop=!1},p.prototype._renderLoop=function(e){if(e._loop){var t=window.performance.now(),o=t-e._then;if(300<o&&(e._startTime=t,e._frameCount=0,e._then=t,o=0),o>e._fpsInterval){e._then=t-o%e._fpsInterval,e._frameCount+=1;var s=t-e._startTime,n=Math.round(1e3/(s/e._frameCount)),r=new c;r.canvas=e.canvas,r.context=e.context,r.glCanvas=e.glCanvas,r.glContext=e.glContext,r.webgl=e.opts.webGl,r.backgroundColor=e.opts.backgroundColor,r.deltaTime=o/1e3,r.frameCount=e._frameCount,r.startTime=e._startTime,r.fps=n,(r.loop=e).context.save();for(var i=0,a=e._rendererBuffer;i<a.length;i++){var h=a[i];try{h(r)}catch(t){f('Renderer function "'+h.name+'" threw an uncaught exception: "'+t+'"',!0),e._loop=!1}}for(var u=0,l=e._renderQueueBuffer;u<l.length;u++)l[u].renderer(r);for(var d=0,p=e._shaderBuffer;d<p.length;d++)p[d].renderer(r);e.context.restore()}requestAnimationFrame(function(){e._renderLoop(e)})}},p);function p(t,e){var s=this;t instanceof HTMLCanvasElement||f("Loop requires an HTML Canvas Element",!0);var o=t.getContext("2d");if(null===o&&f("Unable to get canvas context. Did you already get a WebGL or 3D context from this canvas?",!0),this.canvas=t,this.context=o,this.opts={backgroundColor:"#000",webGl:!1},void 0!==e)for(var n in e)void 0!==this.opts[n]&&(this.opts[n]=e[n]);if(this.glCanvas=this.opts.webGl?document.createElement("canvas"):null,this.glContext=this.opts.webGl?this.glCanvas.getContext("webgl"):null,this.opts.webGl){var r=document.createElement("div");r.id="v4-wrapper",this.glCanvas.id="v4-webgl-canvas",this.canvas.parentElement.appendChild(r),r.appendChild(this.canvas),r.appendChild(this.glCanvas),this.glCanvas.style.position="absolute",this.canvas.style.position="absolute"}this._loop=!1,this._frameCount=0,this._startTime=Date.now(),this._then=Date.now(),this.framesPerSecond(30),this._rendererBuffer=[h,a],this._renderQueueBuffer=[],this._shaderBuffer=[],this._sizeAdjusted=!1;function i(){var t=s._sizeAdjusted?1:window.devicePixelRatio,e=s.canvas.width,o=s.canvas.height;s.canvas.width=e*t,s.canvas.height=o*t,s.canvas.style.width=e+"px",s.canvas.style.height=o+"px",s.context.scale(t,t),s.opts.webGl&&(s.glCanvas.width=e*t,s.glCanvas.height=o*t,s.glCanvas.style.width=e+"px",s.glCanvas.style.height=o+"px",s.glContext.viewport(0,0,e,o)),s._sizeAdjusted=!0}i(),window.addEventListener("resize",i)}function g(o,s){var n,r,i,t,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&e[0]?r.return:e[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,e[1])).done)return i;switch(r=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){a.label=e[1];break}if(6===e[0]&&a.label<i[1]){a.label=i[1],i=e;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(e);break}i[2]&&a.ops.pop(),a.trys.pop();continue}e=s.call(o,a)}catch(t){e=[6,t],r=0}finally{n=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var v=(_.prototype.loadFont=function(o,s){return void 0===o&&(o=""),function(r,i,a,h){return new(a=a||Promise)(function(t,e){function o(t){try{n(h.next(t))}catch(t){e(t)}}function s(t){try{n(h.throw(t))}catch(t){e(t)}}function n(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(o,s)}n((h=h.apply(r,i||[])).next())})}(this,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:return[4,this._load(o)];case 1:return e=t.sent(),void 0!==s&&(this._fonts[s]=e),[2,e]}})})},_.prototype._load=function(t){return new Promise(function(o){e.load(t,function(t,e){t?(f("Font could not be loaded.",!0),o(void 0)):o(e)})})},_.prototype.getFontVariant=function(t){var e=this._fonts[t];if(void 0!==e)return e;f('Could not get font "'+t+'". Did you forget to load it from a file with loadFont()?')},_);function _(t){this.name=t,this._fonts={}}function b(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},m={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},y=Object.prototype.toString,w=function(t){var e,o,s=[],n=1;if("string"==typeof t)if(m[t])s=m[t].slice(),o="rgb";else if("transparent"===t)o="rgb",s=[n=0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var r=(h=t.slice(1)).length;n=1,r<=4?(s=[parseInt(h[0]+h[0],16),parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16)],4===r&&(n=parseInt(h[3]+h[3],16)/255)):(s=[parseInt(h[0]+h[1],16),parseInt(h[2]+h[3],16),parseInt(h[4]+h[5],16)],8===r&&(n=parseInt(h[6]+h[7],16)/255)),s[0]||(s[0]=0),s[1]||(s[1]=0),s[2]||(s[2]=0),o="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var i=e[1],a="rgb"===i,h=i.replace(/a$/,"");r="cmyk"===(o=h)?4:"gray"===h?1:3;s=e[2].trim().split(/\s*,\s*/).map(function(t,e){if(/%$/.test(t))return e===r?parseFloat(t)/100:"rgb"===h?255*parseFloat(t)/100:parseFloat(t);if("h"===h[e]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==T[t])return T[t]}return parseFloat(t)}),i===h&&s.push(1),n=a?1:void 0===s[r]?1:s[r],s=s.slice(0,r)}else 10<t.length&&/[0-9](?:\s|\/)/.test(t)&&(s=t.match(/([0-9]+)/g).map(function(t){return parseFloat(t)}),o=t.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(t))if(function(t){var e;return"[object Object]"===y.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}(t)){var u=b(t.r,t.red,t.R,null);s=null!==u?(o="rgb",[u,b(t.g,t.green,t.G),b(t.b,t.blue,t.B)]):(o="hsl",[b(t.h,t.hue,t.H),b(t.s,t.saturation,t.S),b(t.l,t.lightness,t.L,t.b,t.brightness)]),n=b(t.a,t.alpha,t.opacity,1),null!=t.opacity&&(n/=100)}else(Array.isArray(t)||x.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t))&&(s=[t[0],t[1],t[2]],o="rgb",n=4===t.length?t[3]:1);else o="rgb",s=[t>>>16,(65280&t)>>>8,255&t];return{space:o,values:s,alpha:n}},T={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};var k=function(t){var e,o,s,n,r,i=t[0]/360,a=t[1]/100,h=t[2]/100;if(0==a)return[r=255*h,r,r];e=2*h-(o=h<.5?h*(1+a):h+a-h*a),n=[0,0,0];for(var u=0;u<3;u++)(s=i+1/3*-(u-1))<0?s++:1<s&&s--,r=6*s<1?e+6*(o-e)*s:2*s<1?o:3*s<2?e+(o-e)*(2/3-s)*6:e,n[u]=255*r;return n};function S(t,e,o){return t*(1-o)+e*o}var O=function(t,e,o){return e<o?t<e?e:o<t?o:t:t<o?o:e<t?e:t};var C=function(h){return h=h.map(function(t){if("rgb"!=(t=w(t)).space){if("hsl"!=t.space)throw"c.spacespace is not supported.";t.values=k(t.values)}return t.values.push(t.alpha),t.values}),function(o,s){s=s||S,o=O(o,0,1);var t=(h.length-1)*o,e=Math.floor(t),n=Math.ceil(t);o=t-e;var r=h[e],i=h[n],a=r.map(function(t,e){return t=s(t,i[e],o),e<3&&(t=Math.round(t)),t});return 1===a[3]?"rgb("+a.slice(0,3)+")":"rgba("+a+")"}};var E={linear:function(t,e,o,s){return(o-e)*t/s+e},easeInQuad:function(t,e,o,s){return(o-e)*(t/=s)*t+e},easeOutQuad:function(t,e,o,s){return-(o-e)*(t/=s)*(t-2)+e},easeInOutQuad:function(t,e,o,s){var n=o-e;return(t/=s/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,o,s){return(o-e)*(t/=s)*t*t+e},easeOutCubic:function(t,e,o,s){return(o-e)*((t=t/s-1)*t*t+1)+e},easeInOutCubic:function(t,e,o,s){var n=o-e;return(t/=s/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,o,s){return(o-e)*(t/=s)*t*t*t+e},easeOutQuart:function(t,e,o,s){return-(o-e)*((t=t/s-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,o,s){var n=o-e;return(t/=s/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,o,s){return(o-e)*(t/=s)*t*t*t*t+e},easeOutQuint:function(t,e,o,s){return(o-e)*((t=t/s-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,o,s){var n=o-e;return(t/=s/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,o,s){var n=o-e;return-n*Math.cos(t/s*(Math.PI/2))+n+e},easeOutSine:function(t,e,o,s){return(o-e)*Math.sin(t/s*(Math.PI/2))+e},easeInOutSine:function(t,e,o,s){return-(o-e)/2*(Math.cos(Math.PI*t/s)-1)+e},easeInExpo:function(t,e,o,s){return 0==t?e:(o-e)*Math.pow(2,10*(t/s-1))+e},easeOutExpo:function(t,e,o,s){var n=o-e;return t==s?e+n:n*(1-Math.pow(2,-10*t/s))+e},easeInOutExpo:function(t,e,o,s){var n=o-e;return 0===t?e:t===s?e+n:(t/=s/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,o,s){return-(o-e)*(Math.sqrt(1-(t/=s)*t)-1)+e},easeOutCirc:function(t,e,o,s){return(o-e)*Math.sqrt(1-(t=t/s-1)*t)+e},easeInOutCirc:function(t,e,o,s){var n=o-e;return(t/=s/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,o,s){var n,r,i,a=o-e;return i=1.70158,n=a,(r=0)===t?e:1==(t/=s)?e+a:(r=r||.3*s,i=n<Math.abs(a)?(n=a,r/4):r/(2*Math.PI)*Math.asin(a/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t*s-i)*(2*Math.PI)/r)+e)},easeOutElastic:function(t,e,o,s){var n,r,i,a=o-e;return i=1.70158,n=a,(r=0)===t?e:1==(t/=s)?e+a:(r=r||.3*s,i=n<Math.abs(a)?(n=a,r/4):r/(2*Math.PI)*Math.asin(a/n),n*Math.pow(2,-10*t)*Math.sin((t*s-i)*(2*Math.PI)/r)+a+e)},easeInOutElastic:function(t,e,o,s){var n,r,i,a=o-e;return i=1.70158,n=a,(r=0)===t?e:2==(t/=s/2)?e+a:(r=r||s*(.3*1.5),i=n<Math.abs(a)?(n=a,r/4):r/(2*Math.PI)*Math.asin(a/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*s-i)*(2*Math.PI)/r)*-.5+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*s-i)*(2*Math.PI)/r)*.5+a+e)},easeInBack:function(t,e,o,s,n){return void 0===n&&(n=1.70158),(o-e)*(t/=s)*t*((n+1)*t-n)+e},easeOutBack:function(t,e,o,s,n){return void 0===n&&(n=1.70158),(o-e)*((t=t/s-1)*t*((n+1)*t+n)+1)+e},easeInOutBack:function(t,e,o,s,n){var r=o-e;return void 0===n&&(n=1.70158),(t/=s/2)<1?r/2*(t*t*((1+(n*=1.525))*t-n))+e:r/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},easeInBounce:function(t,e,o,s){var n=o-e;return n-E.easeOutBounce(s-t,0,n,s)+e},easeOutBounce:function(t,e,o,s){var n=o-e;return(t/=s)<1/2.75?7.5625*t*t*n+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,o,s){var n=o-e;return t<s/2?.5*E.easeInBounce(2*t,0,n,s)+e:.5*E.easeOutBounce(2*t-s,0,n,s)+.5*n+e}},P=(I.prototype.renderer=function(t){if(this._elapsed+=t.deltaTime,!(this._elapsed<this._duration))return this._box.renderer(t),!1;var e={backgroundColorLerp:this._backgroundColorLerp,colorLerp:this._colorLerp,destOpts:this._destOpts,duration:this._duration,easingFunc:this._easingFunc,elapsed:this._elapsed,ogOpts:this._ogOpts};return i(this.opts,this,e),this._box.options(this.opts),this._box.renderer(t),!0},I);function I(t,e,o,s){t instanceof u&&(this._box=t,this._ogOpts=Object.assign({},t.opts),this.opts=t.opts,this._destOpts=e,this._duration=void 0!==o?o:1.5,this._easingFunc=void 0!==s?E[s]:E.easeInQuad,this._backgroundColorLerp=void 0!==this._destOpts.backgroundColor?C([this._ogOpts.backgroundColor,this._destOpts.backgroundColor]):function(){return""},this._colorLerp=void 0!==this._destOpts.color?C([this._ogOpts.color,this._destOpts.color]):function(){return""}),this._elapsed=0,this.renderer=this.renderer.bind(this)}t.Animation=P,t.FontGroup=v,t.Loop=d,t.RenderQueue=o,t.Shader=n,t.TextBox=u,t.backgroundRenderer=a,t.clearPrevRenderer=h,Object.defineProperty(t,"__esModule",{value:!0})});
